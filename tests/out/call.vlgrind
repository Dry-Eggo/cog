==23633== Memcheck, a memory error detector
==23633== Copyright (C) 2002-2024, and GNU GPL'd, by Julian Seward et al.
==23633== Using Valgrind-3.23.0 and LibVEX; rerun with -h for copyright info
==23633== Command: bin/cogc tests/call.cg
==23633== Parent PID: 23632
==23633== 
==23633== Conditional jump or move depends on uninitialised value(s)
==23633==    at 0x4851AD8: __strlen_sse2 (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==23633==    by 0x109662: jb_append (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x109AB8: jb_read_entire_file (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x10C90C: cog_compile (compiler/driver.c:72)
==23633==    by 0x11192E: main (compiler/main.c:28)
==23633== 
==23633== Conditional jump or move depends on uninitialised value(s)
==23633==    at 0x4851AD8: __strlen_sse2 (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==23633==    by 0x1096FD: jb_append (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x109AB8: jb_read_entire_file (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x10C90C: cog_compile (compiler/driver.c:72)
==23633==    by 0x11192E: main (compiler/main.c:28)
==23633== 
==23633== Conditional jump or move depends on uninitialised value(s)
==23633==    at 0x4851AD8: __strlen_sse2 (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==23633==    by 0x109501: jarena_strdup (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x10992B: jb_str (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x10C937: cog_compile (compiler/driver.c:74)
==23633==    by 0x11192E: main (compiler/main.c:28)
==23633== 
==23633== Conditional jump or move depends on uninitialised value(s)
==23633==    at 0x4851AD8: __strlen_sse2 (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==23633==    by 0x109501: jarena_strdup (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x109E18: jvec_lines (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x10C5C8: driver_new (compiler/driver.c:27)
==23633==    by 0x10C948: cog_compile (compiler/driver.c:76)
==23633==    by 0x11192E: main (compiler/main.c:28)
==23633== 
==23633== Conditional jump or move depends on uninitialised value(s)
==23633==    at 0x109E5B: jvec_lines (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x10C5C8: driver_new (compiler/driver.c:27)
==23633==    by 0x10C948: cog_compile (compiler/driver.c:76)
==23633==    by 0x11192E: main (compiler/main.c:28)
==23633== 
==23633== Conditional jump or move depends on uninitialised value(s)
==23633==    at 0x4851AD8: __strlen_sse2 (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==23633==    by 0x10E760: lexer_new (compiler/lexer.c:13)
==23633==    by 0x10C97D: cog_compile (compiler/driver.c:79)
==23633==    by 0x11192E: main (compiler/main.c:28)
==23633== 
==23633== Conditional jump or move depends on uninitialised value(s)
==23633==    at 0x4851AC9: __strlen_sse2 (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==23633==    by 0x109501: jarena_strdup (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x10992B: jb_str (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x1134D1: cctx_walk_parameters (compiler/backend/c_backend.c:348)
==23633==    by 0x113585: cctx_walk_function (compiler/backend/c_backend.c:357)
==23633==    by 0x113739: cctx_walk_items (compiler/backend/c_backend.c:378)
==23633==    by 0x113838: cctx_get_output (compiler/backend/c_backend.c:392)
==23633==    by 0x10CCB0: cog_compile (compiler/driver.c:109)
==23633==    by 0x11192E: main (compiler/main.c:28)
==23633== 
==23633== Conditional jump or move depends on uninitialised value(s)
==23633==    at 0x4851AC9: __strlen_sse2 (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==23633==    by 0x48E561F: __printf_buffer (vfprintf-process-arg.c:435)
==23633==    by 0x490C05E: __vsnprintf_internal (vsnprintf.c:96)
==23633==    by 0x490C05E: vsnprintf (vsnprintf.c:103)
==23633==    by 0x109833: jb_appendf (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x1135C8: cctx_walk_function (compiler/backend/c_backend.c:356)
==23633==    by 0x113739: cctx_walk_items (compiler/backend/c_backend.c:378)
==23633==    by 0x113838: cctx_get_output (compiler/backend/c_backend.c:392)
==23633==    by 0x10CCB0: cog_compile (compiler/driver.c:109)
==23633==    by 0x11192E: main (compiler/main.c:28)
==23633== 
==23633== Conditional jump or move depends on uninitialised value(s)
==23633==    at 0x4851AC9: __strlen_sse2 (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==23633==    by 0x48E561F: __printf_buffer (vfprintf-process-arg.c:435)
==23633==    by 0x490C05E: __vsnprintf_internal (vsnprintf.c:96)
==23633==    by 0x490C05E: vsnprintf (vsnprintf.c:103)
==23633==    by 0x1098B1: jb_appendf (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x1135C8: cctx_walk_function (compiler/backend/c_backend.c:356)
==23633==    by 0x113739: cctx_walk_items (compiler/backend/c_backend.c:378)
==23633==    by 0x113838: cctx_get_output (compiler/backend/c_backend.c:392)
==23633==    by 0x10CCB0: cog_compile (compiler/driver.c:109)
==23633==    by 0x11192E: main (compiler/main.c:28)
==23633== 
==23633== Invalid write of size 8
==23633==    at 0x48531E3: memcpy@GLIBC_2.2.5 (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==23633==    by 0x1093E5: jarena_alloc (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x109871: jb_appendf (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x113623: cctx_walk_function (compiler/backend/c_backend.c:364)
==23633==    by 0x113739: cctx_walk_items (compiler/backend/c_backend.c:378)
==23633==    by 0x113838: cctx_get_output (compiler/backend/c_backend.c:392)
==23633==    by 0x10CCB0: cog_compile (compiler/driver.c:109)
==23633==    by 0x11192E: main (compiler/main.c:28)
==23633==  Address 0x4aabc38 is 504 bytes inside a block of size 510 alloc'd
==23633==    at 0x4848858: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==23633==    by 0x10939D: jarena_alloc (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x109871: jb_appendf (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x113623: cctx_walk_function (compiler/backend/c_backend.c:364)
==23633==    by 0x113739: cctx_walk_items (compiler/backend/c_backend.c:378)
==23633==    by 0x113838: cctx_get_output (compiler/backend/c_backend.c:392)
==23633==    by 0x10CCB0: cog_compile (compiler/driver.c:109)
==23633==    by 0x11192E: main (compiler/main.c:28)
==23633== 
==23633== Invalid write of size 8
==23633==    at 0x48531CB: memcpy@GLIBC_2.2.5 (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==23633==    by 0x1093E5: jarena_alloc (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x109871: jb_appendf (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x113623: cctx_walk_function (compiler/backend/c_backend.c:364)
==23633==    by 0x113739: cctx_walk_items (compiler/backend/c_backend.c:378)
==23633==    by 0x113838: cctx_get_output (compiler/backend/c_backend.c:392)
==23633==    by 0x10CCB0: cog_compile (compiler/driver.c:109)
==23633==    by 0x11192E: main (compiler/main.c:28)
==23633==  Address 0x4aabc40 is 2 bytes after a block of size 510 alloc'd
==23633==    at 0x4848858: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==23633==    by 0x10939D: jarena_alloc (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x109871: jb_appendf (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x113623: cctx_walk_function (compiler/backend/c_backend.c:364)
==23633==    by 0x113739: cctx_walk_items (compiler/backend/c_backend.c:378)
==23633==    by 0x113838: cctx_get_output (compiler/backend/c_backend.c:392)
==23633==    by 0x10CCB0: cog_compile (compiler/driver.c:109)
==23633==    by 0x11192E: main (compiler/main.c:28)
==23633== 
==23633== Invalid write of size 8
==23633==    at 0x48531D3: memcpy@GLIBC_2.2.5 (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==23633==    by 0x1093E5: jarena_alloc (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x109871: jb_appendf (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x113623: cctx_walk_function (compiler/backend/c_backend.c:364)
==23633==    by 0x113739: cctx_walk_items (compiler/backend/c_backend.c:378)
==23633==    by 0x113838: cctx_get_output (compiler/backend/c_backend.c:392)
==23633==    by 0x10CCB0: cog_compile (compiler/driver.c:109)
==23633==    by 0x11192E: main (compiler/main.c:28)
==23633==  Address 0x4aabc48 is 10 bytes after a block of size 510 alloc'd
==23633==    at 0x4848858: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==23633==    by 0x10939D: jarena_alloc (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x109871: jb_appendf (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x113623: cctx_walk_function (compiler/backend/c_backend.c:364)
==23633==    by 0x113739: cctx_walk_items (compiler/backend/c_backend.c:378)
==23633==    by 0x113838: cctx_get_output (compiler/backend/c_backend.c:392)
==23633==    by 0x10CCB0: cog_compile (compiler/driver.c:109)
==23633==    by 0x11192E: main (compiler/main.c:28)
==23633== 
==23633== Invalid write of size 8
==23633==    at 0x48531DB: memcpy@GLIBC_2.2.5 (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==23633==    by 0x1093E5: jarena_alloc (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x109871: jb_appendf (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x113623: cctx_walk_function (compiler/backend/c_backend.c:364)
==23633==    by 0x113739: cctx_walk_items (compiler/backend/c_backend.c:378)
==23633==    by 0x113838: cctx_get_output (compiler/backend/c_backend.c:392)
==23633==    by 0x10CCB0: cog_compile (compiler/driver.c:109)
==23633==    by 0x11192E: main (compiler/main.c:28)
==23633==  Address 0x4aabc50 is 18 bytes after a block of size 510 alloc'd
==23633==    at 0x4848858: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==23633==    by 0x10939D: jarena_alloc (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x109871: jb_appendf (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x113623: cctx_walk_function (compiler/backend/c_backend.c:364)
==23633==    by 0x113739: cctx_walk_items (compiler/backend/c_backend.c:378)
==23633==    by 0x113838: cctx_get_output (compiler/backend/c_backend.c:392)
==23633==    by 0x10CCB0: cog_compile (compiler/driver.c:109)
==23633==    by 0x11192E: main (compiler/main.c:28)
==23633== 

valgrind: m_mallocfree.c:304 (get_bszB_as_is): Assertion 'bszB_lo == bszB_hi' failed.
valgrind: Heap block lo/hi size mismatch: lo = 576, hi = 78249408.
This is probably caused by your program erroneously writing past the
end of a heap block and corrupting heap metadata.  If you fix any
invalid writes reported by Memcheck, this assertion failure will
probably go away.  Please try that before reporting this as a bug.


host stacktrace:
==23633==    at 0x5804590A: ??? (in /usr/libexec/valgrind/memcheck-amd64-linux)
==23633==    by 0x58045A4F: ??? (in /usr/libexec/valgrind/memcheck-amd64-linux)
==23633==    by 0x58045BE5: ??? (in /usr/libexec/valgrind/memcheck-amd64-linux)
==23633==    by 0x5804FD78: ??? (in /usr/libexec/valgrind/memcheck-amd64-linux)
==23633==    by 0x5803D31A: ??? (in /usr/libexec/valgrind/memcheck-amd64-linux)
==23633==    by 0x5803B907: ??? (in /usr/libexec/valgrind/memcheck-amd64-linux)
==23633==    by 0x58040849: ??? (in /usr/libexec/valgrind/memcheck-amd64-linux)
==23633==    by 0x5803A790: ??? (in /usr/libexec/valgrind/memcheck-amd64-linux)
==23633==    by 0x1002EA3D64: ???
==23633==    by 0x1002DADF0F: ???

sched status:
  running_tid=1

Thread 1: status = VgTs_Runnable (lwpid 23633)
==23633==    at 0x4853224: memcpy@GLIBC_2.2.5 (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==23633==    by 0x1093E5: jarena_alloc (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x109871: jb_appendf (in /home/dry/programming/c/cog/bin/cogc)
==23633==    by 0x113623: cctx_walk_function (compiler/backend/c_backend.c:364)
==23633==    by 0x113739: cctx_walk_items (compiler/backend/c_backend.c:378)
==23633==    by 0x113838: cctx_get_output (compiler/backend/c_backend.c:392)
==23633==    by 0x10CCB0: cog_compile (compiler/driver.c:109)
==23633==    by 0x11192E: main (compiler/main.c:28)
client stack range: [0x1FFEFFD000 0x1FFF000FFF] client SP: 0x1FFEFFF7E8
valgrind stack range: [0x1002CAE000 0x1002DADFFF] top usage: 18600 of 1048576


Note: see also the FAQ in the source distribution.
It contains workarounds to several common problems.
In particular, if Valgrind aborted or crashed after
identifying problems in your program, there's a good chance
that fixing those problems will prevent Valgrind aborting or
crashing, especially if it happened in m_mallocfree.c.

If that doesn't help, please report this bug to: www.valgrind.org

In the bug report, send all the above text, the valgrind
version, and what OS and version you are using.  Thanks.

