#pragma once
#include <compiler.h>
#include <compiler_opt.h>

typedef struct CContext CContext;
typedef struct CFunction CFunction;
typedef struct CType CType;
typedef struct CValue CValue;

typedef enum {
    CStorageExtern,
    CStorageInline,
} CStorageAttr;

typedef enum {
    CTypeInt,
    CTypePointer,
    CTypeChar,
    CTypeDouble,
    CTypeVoid,
} CTypeKind;

typedef enum {
    CIntSigned,
    CIntUnsigned,
} CIntSign;

CContext*  cctx_new(JArena* arena);
CFunction* cctx_create_function(CContext* cctx, const char* name, CJVec* params, CJVec* sattr, CType* type);
void       cctx_end_function(CContext* cctx, CFunction* func, CValue* value);

CType*     cctx_create_int_type(CContext* cctx, CIntSign sign);

CValue*    cctx_create_int()

JBuffer* cctx_get_output(CContext* ctx);
void cctx_free(CContext* ctx);

